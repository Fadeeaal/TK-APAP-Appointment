<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>Doctors</title>

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
	
	<!-- DataTables CSS -->
	<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css">

	<!-- jQuery and DataTables JS -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>

	<style>
		.table-container {
			padding: 20px;
		}
		.add-button {
			margin-bottom: 20px;
		}
	</style>
</head>

<body>
  <!-- Navbar -->
  <nav th:replace="~{fragments/navbar :: navbar}"></nav>

  <!-- Content -->
  <div class="container text-center table-container">
    <div class="row pt-5 pb-2">
      <!-- Button Add Doctor -->
	  <div class="col text-end mb-3">
		<a href="/doctor/add" class="btn btn-primary">Add Doctor</a>
	  </div>

      <!-- Table Doctors -->
      <table id="doctorTable" class="table table-bordered display responsive nowrap" style="width:100%">
        <thead class="table-primary">
          <tr>
            <th>No</th>
            <th>Doctor ID</th>
            <th>Doctor</th>
            <th>Specialization</th>
            <th>Schedule (Days)</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="doctor, iterStat : ${listDoctor}">
            <td th:text="${iterStat.index + 1}">1</td>
            <td th:text="${doctor.id}">DR001</td>
            <td th:text="${doctor.name}">dr. Andi Saputra, Sp.A</td>
            <td th:text="${specialistMap[doctor.specialist]}">Anak</td>
            <td>
				<span th:each="schedule, iterStat : ${doctor.schedules}">
					<span th:switch="${schedule}">
						<span th:case="0">Monday</span>
						<span th:case="1">Tuesday</span>
						<span th:case="2">Wednesday</span>
						<span th:case="3">Thursday</span>
						<span th:case="4">Friday</span>
						<span th:case="5">Saturday</span>
						<span th:case="6">Sunday</span>
					</span>
					<span th:if="${iterStat.count < doctor.schedules.size()}">, </span> <!-- Tambahkan koma kecuali pada elemen terakhir -->
				</span>
			</td>			
            <td>
              <a th:href="@{'/doctor/' + ${doctor.id}}" class="btn btn-info btn-sm">Detail</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- DataTables initialization script -->
  <script>
    $(document).ready(function () {
      $('#doctorTable').DataTable({
        "paging": true,       // Enable pagination
        "lengthChange": true, // Allow users to change the number of rows per page
        "searching": true,    // Enable search box
        "ordering": true,     // Enable sorting on columns
        "info": true,         // Show information about records
        "autoWidth": false,   // Disable auto column width calculation
        "responsive": true,   // Make the table responsive
        "language": {
          "search": "Search by name:" // Customize search placeholder
        }
      });
    });
  </script>
</body>
</html>
